
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>James Ward</title>
  <meta name="author" content="James Ward">

  
  <meta name="description" content="Over the past few months Greg Wilson, Christophe Coenraets, and myself have been hard at work on a secret project. So today we are proud to announce &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jamesward.github.com/page/20">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="James Ward" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-784803-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">James Ward</a></h1>
  
    <h2>Heroku | Java | Scala | Cloud | Open Source | Linux</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jamesward.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about-james-ward">About James Ward</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/17/take-the-tour-de-flex/">Take the Tour De Flex</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-17T10:28:15-07:00" pubdate data-updated="true">Nov 17<span>th</span>, 2008</time>
        
         | <a href="/2008/11/17/take-the-tour-de-flex/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Over the past few months <a href="http://gregsramblings.com/">Greg Wilson</a>, <a href="http://coenraets.org/">Christophe Coenraets</a>, and myself have been hard at work on a secret project.  So today we are proud to announce the new <a href="http://flex.org/tour">Tour de Flex</a> has just gone live!  Tour de Flex showcases the capabilities of Flex, BlazeDS, LCDS, Adobe AIR, and Flash Player (now collectively called the Adobe Flash Platform).</p>

<p><a href="http://flex.org/tour"><img src="http://flex.org/files/Screenshot_0.png" alt="" /></a></p>

<p>Like the old <a href="http://examples.adobe.com/flex3/componentexplorer/explorer.html">Flex Component Explorer</a>, Tour de Flex can be used to find components.  But it goes way beyond just out-of-the-box Flex components.  This first release contains 217 components and samples including popular Cloud APIs like <a href="http://developer.salesforce.com">Salesforce.com</a> and <a href="http://developer.intuit.com">Intuit</a>, numerous community components from people like <a href="http://dougmccune.com/blog/">Doug McCune</a> and <a href="http://tink.ws/blog/">Tink</a>, commercial components from companies like <a href="http://www.ilog.com/products/elixir/">ILog</a>, and numerous other goodies.  If you find something missing you can <a href="http://flex.org/2008/10/31/submit-component-tour-de-flex">submit it</a>!</p>

<p>Also in this release is an Eclipse / Flex Builder plugin which allows you to find components from inside Flex Builder!</p>

<p>We hope the Tour de Flex will provide an easy way for you to find components and see what is great about the Adobe Flash Platform.  Give it a try and let us know what you think!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/17/flash-player-for-64-bit-linux-beta-now-available/">Flash Player for 64-bit Linux - BETA NOW AVAILABLE!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-17T03:42:48-07:00" pubdate data-updated="true">Nov 17<span>th</span>, 2008</time>
        
         | <a href="/2008/11/17/flash-player-for-64-bit-linux-beta-now-available/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Getting Flash Player working on 64-bit Linux systems has been a challenge.  But not anymore!  Today Adobe Systems <a href="http://labs.adobe.com/technologies/flashplayer10/">released a beta</a> of native Flash Player 10 for 64-bit Linux!  Check it out and report bugs to the <a href="https://bugs.adobe.com/flashplayer/">open Flash Player bug database</a>.  Here is a short video I shot of me testing the new Flash Player 10 plugin for 64-bit Ubuntu Linux.  Let me know what you think!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/13/ria-cowboy-videos-lightstreamer-data-streaming-for-flex/">RIA Cowboy Videos - Lightstreamer - Data Streaming for Flex</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-13T14:35:18-07:00" pubdate data-updated="true">Nov 13<span>th</span>, 2008</time>
        
         | <a href="/2008/11/13/ria-cowboy-videos-lightstreamer-data-streaming-for-flex/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>While at AjaxWorld 2008 I had the chance to record another episode of the &#8220;RIA Cowboy Videos&#8221;.  This time I talk with <a href="http://www.lightstreamer.com">Lightstreamer</a> about their AS3 / Flex APIs for streaming data to the client.  Check out the video and let me know what you think.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/13/intellij-idea-80-adds-flex-support/">IntelliJ IDEA 8.0 Adds Flex Support</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-13T03:14:19-07:00" pubdate data-updated="true">Nov 13<span>th</span>, 2008</time>
        
         | <a href="/2008/11/13/intellij-idea-80-adds-flex-support/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.jetbrains.com/idea/index.html">IntelliJ IDEA 8.0</a>, the popular Java IDE, has been released and now supports building and debugging Flex applications.  This is great validation of Flex&#8217;s momentum in the Java community.  For more information on how to get started see &#8221;<a href="http://www.jetbrains.com/idea/docs/Creating_Flex_Applications_with_IntelliJ_IDEA.pdf">Creating Flex Applications with IntelliJ IDEA</a>&#8221;.  If you are a Java and Flex developer you should definitely download the trial version and check it out.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/12/intuit-unites-flex-rias-and-the-cloud/">Intuit Unites Flex RIAs and the Cloud</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-12T14:03:40-07:00" pubdate data-updated="true">Nov 12<span>th</span>, 2008</time>
        
         | <a href="/2008/11/12/intuit-unites-flex-rias-and-the-cloud/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Normal computer users like my father know at least three software vendors: Microsoft, Adobe, and Intuit.  Microsoft is known for Windows and Office, Adobe for PDF (Reader / Acrobat), and Intuit for Quicken and QuickBooks.  Yet all three of these software vendors are changing.  All are moving in two directions concurrently: rich Internet applications and the cloud.  These two paradigm shifts are changing how developers build software but more importantly they are changing how people like my father experience and use software.</p>

<p>The future of software is services in the cloud and rich Internet application on the client.  Adobe has pulled back the curtain and given us a glimpse of this with new products like <a href="http://www.photoshop.com">photoshop.com</a> and <a href="http://www.acrobat.com">acrobat.com</a>.  Intuit is beginning to do the same with QuickBase and Flex through the <a href="http://developer.intuit.com/ipp">Intuit Partner Platform</a>. For developers this means that applications can be built with Flex and live in the cloud.  These applications can even integrate with QuickBooks.  Intuit has built an Eclipse plugin that works with Flex Builder.  This makes it extremely easy to build cloud-based Flex applications.  I&#8217;ve recorded two short screencasts that will walk you through how all of this works:</p>

<p><a href="/videos/intuit_quickbase_and_flex_part1.html">Part 1: Creating a QuickBase application with Adobe AIR and Flex</a></p>

<p><a href="/videos/intuit_quickbase_and_flex_part2.html">Part 2: Creating a QuickBase widget for the browser and the desktop</a></p>

<p>To get started or to read more visit <a href="http://developer.intuit.com/">Intuit&#8217;s Developer website</a>.</p>

<p><img src="/wordpress/wp-content/uploads/2008/11/quickbase_flex.jpg" alt="" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/05/portable-rias-flex-apps-in-pdfs/">Portable RIAs - Flex Apps in PDFs</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-05T12:54:00-07:00" pubdate data-updated="true">Nov 5<span>th</span>, 2008</time>
        
         | <a href="/2008/11/05/portable-rias-flex-apps-in-pdfs/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Update: I&#8217;ve posted another <a href="http://www.jamesward.com/2009/09/13/rias-on-the-web-on-the-desktop-and-in-a-pdf/">Portable RIA demo</a>.</p>

<p>The web began as a platform for browsing, finding, and exchanging documents. Over the past ten years the web has moved beyond this document-centric role, and is now a platform for exchanging data. We typically refer to web sites used for data exchange as web applications. The next major evolution of the web is underway as web applications become more interactive and useful. The industry now refers to these next generation web applications as rich Internet applications or RIAs.</p>

<p>Another popular means of document exchange is the Portable Document Format (PDF). Like the web, PDFs are also evolving into more than just a document exchange technology. When RIAs are inserted into PDFs, this familiar format for documents becomes a method for exchanging and interacting with data. The primary benefits of using PDFs for data exchange are that PDFs can easily be secured, emailed around, and accessed when offline.</p>

<p>I’ve put together a demo illustrating this concept. You will need Reader 9 in order for this to work. First load <a href="/portablerias/PortableRIAs.html">the Flex Dashboard application</a> application in your browser. Then in the application click the &#8220;Create PDF&#8221; button. Now you should be looking at the same data inside of a PDF! You can even save the PDF locally and view it when disconnected. You can also refresh the data from the server from the PDF or from the browser.</p>

<p><a href="/portablerias/PortableRIAs.html"><img src="/wordpress/wp-content/uploads/2008/10/portable_rias-reader.jpg" alt="" /></a></p>

<p>This works by using a template PDF containing the Flex application without any data. When the user asks for a PDF the data is inserted into the PDF template and delivered to the user. Optionally the PDF could be secured with PDF policy protection before being sent to the user. You can also create these PDFs in a nightly batch process.</p>

<p><strong>Getting Started</strong></p>

<p>You need several pieces to build a portable RIA. First, you need a Flex application that the user will interact with in their browser and inside a PDF. Second, you need some place for the Flex application to get its data. Third, you need a PDF template and a server that can insert the application data into it when the user requests a PDF. I used the following steps to build these pieces:</p>

<ol>
<li><p>Create the back-end data source for the application</p></li>
<li><p>Create the basic Flex front-end application</p></li>
<li><p>Create a back-end PDF generation service</p></li>
<li><p>Create a PDF with form fields that will be used to store the data</p></li>
<li><p>Modify the Flex application to read data from the PDF</p></li>
<li><p>Add a way for the user to generate a PDF from the Flex application</p></li>
<li><p>Merge the final Flex application into the PDF template</p></li>
</ol>


<p>To complete this tutorial you’ll need a Java web app server (Tomcat, JBoss, WebLogic, WebSphere, or similar), LiveCycle Data Services 2.6, Flex Builder 3 (installed as a plugin for Eclipse), Acrobat 9 to create the PDF, and optionally Adobe LiveCycle Designer 8.2.</p>

<p>Let’s walk through each of these seven steps in detail.</p>

<p>Download the <a href="/downloads/portable_rias.zip">source code</a> for tutorial.</p>

<p><strong>Step 1: Creating the back-end data source</strong></p>

<p>The application needs some data so I created a JSP that generates some fake and random sales data. This data is returned from the server in XML format. One challenge in building this was that Reader needs a &#8221;<em>&#8221; crossdomain.xml policy file on the server that offers the data. Having a &#8221;</em>&#8221; policy can be a security risk, especially when the data is on an internal server or on a server which uses cookies for authentication. In my production demo I didn’t want to put a &#8220;*&#8221; policy file on my demo server so I serve the data from a different server. Because of this I ended up using PHP for my public demo. However, for the purposes of this tutorial I will just use a simple JSP file. Here is the file, data.jsp:</p>

<pre><code>&lt;% response.setContentType("text/xml"); %&gt;

&lt;list&gt; 
&lt;% 
String[] months = {"Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov"}; 

for (int i = 6; i &lt; 8; i++) 
{ 
  for (int j = 0; j &lt; months.length; j++) 
  { 
    String month = months[j] + "-0" + i; 
    int apacRev = (int)(Math.random() * 60000); 
    int europeRev = (int)(Math.random() * 80000); 
    int japanRev = (int)(Math.random() * 50000); 
    int latinAmRev = (int)(Math.random() * 30000); 
    int northAmRev = (int)(Math.random() * 100000); 
    int totalRev = apacRev + europeRev + japanRev + latinAmRev + northAmRev; 
    int averageRev = totalRev / 6; 
%&gt; 
    &lt;month average="&lt;%=averageRev%&gt;" name="&lt;%=month%&gt;" revenue="&lt;%=totalRev%&gt;"&gt; 
        &lt;region name="APAC" revenue="&lt;%=apacRev%&gt;"&gt;&lt;/region&gt; 
        &lt;region name="Europe" revenue="&lt;%=europeRev%&gt;"&gt;&lt;/region&gt; 
        &lt;region name="Japan" revenue="&lt;%=japanRev%&gt;"&gt;&lt;/region&gt; 
        &lt;region name="Latin America" revenue="&lt;%=latinAmRev%&gt;"&gt;&lt;/region&gt; 
        &lt;region name="North America" revenue="&lt;%=northAmRev%&gt;"&gt;&lt;/region&gt; 
    &lt;/month&gt; 
&lt;% 
  } 
} 
%&gt; 
&lt;/list&gt;
</code></pre>

<p>You will also need to add a crossdomain.xml policy file to your root web containing the following:</p>

<pre><code>&lt;cross-domain-policy&gt;
    &lt;site-control permitted-cross-domain-policies="master-only"&gt;&lt;/site-control&gt;
    &lt;allow-access-from domain="*"&gt;&lt;/allow-access-from&gt;
&lt;/cross-domain-policy&gt;
</code></pre>

<p>Make sure that you do not use this policy file in production, as you should never have a &#8220;*&#8221; policy on an internal server or on a domain which uses cookies for authentication.  For more information on secure cross-domain communication in Flash Player see:
<a href="http://www.adobe.com/devnet/flashplayer/articles/secure_swf_apps.html">http://www.adobe.com/devnet/flashplayer/articles/secure_swf_apps.html</a></p>

<p><strong>Step 2: Creating the Flex front-end application</strong></p>

<p>Before I could use the typical sales dashboard in the demo, I first had to create that dashboard in Flex. Luckily this was easy since one of the out-of-the-box LiveCycle Data Services samples has a dashboard. I made a few modifications to the dashboard and then added it to my Flex application. You can test the dashboard by creating a HTTPService and attaching the data to the Dashboard. Here is my application (you will need the Dashboard source code from the LiveCycle Data Services sample application for this to compile):</p>

<pre><code>&lt;mx:application xmlns:local="*" applicationcomplete="srv.send()" xmlns:mx="http://www.adobe.com/2006/mxml"&gt;

  &lt;mx:httpservice url="http://localhost:8080/data.jsp" id="srv"&gt;&lt;/mx:httpservice&gt;

  &lt;local:dashboard width="100%" dataprovider="{srv.lastResult.list.month}" height="100%"&gt;&lt;/local:dashboard&gt;

&lt;/mx:application&gt;
</code></pre>

<p><strong>Step 3: Creating a back-end PDF generation service</strong>
I used LiveCycle Data Services to handle generating the PDF for the user. To set up this service I copied the WEB-INF/flex and WEB-INF/lib directories from the flex.war file included with LiveCycle Data Services to my root web application. I then added some necessary configuration code to my web.xml file:</p>

<pre><code>&lt;web-app&gt; 
    &lt;display-name&gt;Portable RIAs Demo&lt;/display-name&gt; 
    &lt;description&gt;Portable RIAs Demo&lt;/description&gt; 

    &lt;listener&gt; 
        &lt;listener-class&gt;flex.messaging.HttpFlexSession&lt;/listener-class&gt; 
    &lt;/listener&gt; 

    &lt;servlet&gt; 
        &lt;servlet-name&gt;MessageBrokerServlet&lt;/servlet-name&gt; 
        &lt;display-name&gt;MessageBrokerServlet&lt;/display-name&gt; 
        &lt;servlet-class&gt;flex.messaging.MessageBrokerServlet&lt;/servlet-class&gt; 
        &lt;init-param&gt; 
            &lt;param-name&gt;services.configuration.file&lt;/param-name&gt; 
            &lt;param-value&gt;/WEB-INF/flex/services-config.xml&lt;/param-value&gt; 
        &lt;/init-param&gt; 
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; 
    &lt;/servlet&gt; 

    &lt;servlet&gt; 
        &lt;servlet-name&gt;PDFResourceServlet&lt;/servlet-name&gt; 
        &lt;display-name&gt;Helper for retrieving dynamically generated PDF documents.&lt;/display-name&gt; 
        &lt;servlet-class&gt;com.jamesward.portablerias.PDFResourceServlet&lt;/servlet-class&gt; 
    &lt;/servlet&gt; 

    &lt;servlet-mapping&gt; 
        &lt;servlet-name&gt;MessageBrokerServlet&lt;/servlet-name&gt; 
        &lt;url-pattern&gt;/messagebroker/*&lt;/url-pattern&gt; 
    &lt;/servlet-mapping&gt; 

    &lt;servlet-mapping&gt; 
        &lt;servlet-name&gt;PDFResourceServlet&lt;/servlet-name&gt; 
        &lt;url-pattern&gt;/dynamic-pdf/*&lt;/url-pattern&gt; 
    &lt;/servlet-mapping&gt; 

&lt;/web-app&gt; 
</code></pre>

<p>The PDFResourceServlet is a custom class that returns the generated PDF to the user. I also created a class named PDFService that actually generates the PDF. Both of these classes are derived from the PDF samples in LiveCycle Data Services. To create these classes I first set up a new Java project in Eclipse. I named the project &#8220;portablerias_server&#8221; and pointed its root directory to the WEB-INF directory, its src directory to the WEB-INF/src directory (which you need to create), and its output directory to the WEB-INF/classes directory. I then created a new Java class called &#8220;com.jamesward.portablerias.PDFService&#8221; containing the following:</p>

<pre><code>package com.jamesward.portablerias; 

import java.io.IOException; 

import javax.servlet.http.HttpServletRequest; 

import org.w3c.dom.Document; 

import flex.acrobat.pdf.XFAHelper; 
import flex.messaging.FlexContext; 
import flex.messaging.FlexSession; 
import flex.messaging.util.UUIDUtils; 

public class PDFService 
{ 

    public Object generatePDF(Document dataset) throws IOException 
    { 
        String source =
            FlexContext.getServletContext().getRealPath("/WEB-INF/pdfgen/dashboard.pdf"); 
        XFAHelper helper = new XFAHelper(); 
        helper.open(source); 

        helper.importDataset(dataset); 

        byte[] bytes = helper.saveToByteArray(); 
        String uuid = UUIDUtils.createUUID(); 
        FlexSession session = FlexContext.getFlexSession(); 
        session.setAttribute(uuid, bytes); 

        helper.close(); 

        HttpServletRequest req = FlexContext.getHttpRequest(); 
        String contextRoot = "/"; 
        if (req != null) 
            contextRoot = req.getContextPath(); 

        String r = contextRoot + "/dynamic-pdf?id=" + uuid + "&amp;;jsessionid=" + session.getId(); 
        return r; 
    } 

}
</code></pre>

<p>Notice that this class references a PDF file, dashboard.pdf, that I have not yet created. This is the PDF template that will be created in Step 7.</p>

<p>I then created a new class called &#8220;com.jamesward.portablerias.PDFResourceServlet&#8221; containing the following code:</p>

<pre><code>package com.jamesward.portablerias; 

import java.io.IOException; 

import javax.servlet.ServletException; 
import javax.servlet.http.HttpServlet; 
import javax.servlet.http.HttpServletRequest; 
import javax.servlet.http.HttpServletResponse; 
import javax.servlet.http.HttpSession; 

public class PDFResourceServlet extends HttpServlet 
{ 
    private static final long serialVersionUID = 8178787853519803189L; 

    protected void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException 
    { 
        doPost(req, res); 
    } 

    protected void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException 
    { 
        String id = (String)req.getParameter("id"); 
        if (id != null) 
        { 
            HttpSession session = req.getSession(true); 
            try 
            { 
                byte[] bytes = (byte[])session.getAttribute(id); 

                if (bytes != null) 
                { 
                    res.setContentType("application/pdf"); 
                    res.setContentLength(bytes.length); 
                    res.getOutputStream().write(bytes); 
                } 
                else 
                { 
                    res.setStatus(404); 
                } 
            } 
            catch (Throwable t) 
            { 
                System.err.println(t.getMessage()); 
            } 
        } 
    } 
}
</code></pre>

<p>This class reads the PDF byte array from the session and returns it to the user as a file. Now that Flash Player 10 is available a better approach would be to just have the PDFService return the byte array and then use the new FileReference API to initiate a file download of those bytes. Storing the PDF in the user session as this demo does is certainly not a scalable approach, and therefore it should not be used in production. Alternatively you could write the PDF files to disk in the PDFService class and then read them from disk in the PDFResourceServlet class.</p>

<p>You need one last configuration step to allow Flex to make requests to the PDFService class. Add the following lines to the WEB-INF/flex/remoting-config.xml file:</p>

<pre><code>    &lt;destination channels="my-amf" id="PDFService"&gt;
        &lt;properties&gt;
            &lt;source&gt;com.jamesward.portablerias.PDFService&lt;/source&gt;
        &lt;/properties&gt;
    &lt;/destination&gt;
</code></pre>

<p>Now your back end is set up! Start (or restart) your app server and verify that there are no errors on the console.</p>

<p><strong>Step 4: Creating a PDF with form fields to store the data</strong></p>

<p>Now you need to create a PDF template that will hold the form fields in which LiveCycle Data Services will store the data. For this step you can either just use my portable_rias_template.pdf file or you can create your own using LiveCycle Designer ES 8.2. If you choose to use mine then you can skip this step.</p>

<p>First create a new blank PDF in Acrobat and save it.  Then open that PDF in LiveCycle Designer and add a form named &#8220;PortableRIAs&#8221;. Add a page named &#8220;Page1&#8221; and then add a TextField named &#8220;Data&#8221; to the page. Then add a script called &#8220;dataScript&#8221; containing:</p>

<pre><code>function getData()
{
    var data = xfa.form.PortableRIAs.Page1.Data.rawValue;
    return data;
}

function setData(dataString)
{
    xfa.form.PortableRIAs.Page1.Data.rawValue = dataString;
}
</code></pre>

<p>The final PDF in Designer should look like:</p>

<p><img src="/wordpress/wp-content/uploads/2008/10/portable_rias-designer.jpg" alt="" /></p>

<p>In step 7 you will merge the Flex application into this file using Acrobat.</p>

<p><strong>Step 5: Modifying the Flex application to read data from the PDF</strong></p>

<p>When your Flex application runs in the browser you want it to get the live data from the web. When it runs in a PDF you want it to use the data inside the PDF. This allows the application to work when the user is disconnected. For bonus points I also added the ability for users to refresh the data in the PDF when they want to. To manage this I created a class called &#8220;com.jamesward.portablerias.PDFCacheManager&#8221; containing the following code:</p>

<pre><code>package com.jamesward.portablerias
{
import flash.external.ExternalInterface;
import flash.xml.XMLDocument;
import flash.xml.XMLNode;
import flash.events.EventDispatcher;

import mx.core.Application;
import mx.rpc.AsyncToken;
import mx.rpc.events.FaultEvent;
import mx.rpc.events.ResultEvent;
import mx.rpc.http.HTTPService;
import mx.rpc.xml.SimpleXMLDecoder;
import mx.utils.ObjectUtil;

[Event(name="fault", type="mx.rpc.events.FaultEvent")]

public class PDFCacheManager extends EventDispatcher
{

  private var srv:HTTPService;
  private var readerVersion:Number;

  [Bindable]
  public var inPDF:Boolean = false;

  [Bindable]
  public var lastResult:Object;

  [Bindable]
  public var lastXMLResult:String;

  [Bindable]
  public var inBrowser:Boolean = false;

  public function PDFCacheManager()
  {
    super();

    srv = new HTTPService();
    srv.useProxy = false;
    // force the result to be text
    srv.resultFormat = HTTPService.RESULT_FORMAT_TEXT;
    srv.addEventListener(ResultEvent.RESULT, handleResult);
    srv.addEventListener(FaultEvent.FAULT, handleFault);

    try
    {
      ExternalInterface.call("eval", "function getViewerVersion() { return app.viewerVersion }");
      var r:Object = ExternalInterface.call("getViewerVersion");
      if (r != null)
      {
        readerVersion = new Number(r);
      }

      if (readerVersion &gt; 0)
      {
        inPDF = true;
      }

      if (readerVersion &lt; 9)
      {
        // Alert.show("You must use Adobe Acrobat 9 or Adobe Reader 9 to view this PDF");
      }
    }
    catch (e:Error)
    {
      // not in a PDF
    }

    if (readerVersion &gt;= 9)
    {
      // setup function to get the data from the PDF
      ExternalInterface.call("eval", "function getData() { return xfa.form.PortableRIAs.dataScript.getData(); }");

      // setup function to set the data in the PDF
      ExternalInterface.call("eval", "function setData(dataString) { xfa.form.PortableRIAs.dataScript.setData(dataString); }");

      // see if the PDF has been opened in the browser or in Reader
      ExternalInterface.call("eval", "function getExternal() { return this.external; }");
      inBrowser = ExternalInterface.call("getExternal");
    }

  }

  public function set url(_url:String):void
  {
    srv.url = _url;
  }

  private function handleResult(event:ResultEvent):void
  {
    parseData(event.result as String);

    if (inPDF)
      {
        updateCache();
      }
  }

  private function parseData(dataString:String):void
  {
    lastXMLResult = dataString;

      var xn:XMLNode = XMLNode(new XMLDocument(lastXMLResult));
      lastResult = (new SimpleXMLDecoder(true)).decodeXML(xn);
  }

  private function handleFault(event:FaultEvent):void
  {
    dispatchEvent(event);
  }

  public function getDataFromServer():void
  {
    srv.send();
  }

  public function getDataFromCache():void
  {
    var xmlDataString:String = ExternalInterface.call("getData");

      parseData(xmlDataString);
  }

  private function updateCache():void
  {
    ExternalInterface.call("setData", lastXMLResult);
  }

}
}
</code></pre>

<p>When this class is instantiated it checks to see if the application is running inside a PDF Reader. It also checks to make sure it’s at least Reader 9. If it is running in Reader >= 9 then it sets up a few function calls that will be used to read and write data to the hidden form field. The class stores a copy of the XML text it retrieves from the server so that when the PDF is created in the browser, it doesn’t have to retrieve the data again. Also if the user updates the data while in the PDF then the local form field is updated but the user would need to save the PDF for the data to be persisted for the next time the PDF is opened.</p>

<p>To use the PDFCacheManager class simply create an instance of it and specify the id, url, and optionally a fault handler:</p>

<pre><code>&lt;portablerias:pdfcachemanager url="http://ws.jamesward.com/data.php" fault="mx.controls.Alert.show(event.fault.message)" id="pdfCacheManager"&gt;&lt;/portablerias:pdfcachemanager&gt;
</code></pre>

<p>When the Flex application has fully initialized I ask the PDFCacheManager to get the data either from within the PDF if the application is running inside Reader or from the network if the application is running in the browser:</p>

<pre><code>  &lt;mx:applicationcomplete&gt;
  if (pdfCacheManager.inPDF)
  {
    pdfCacheManager.getDataFromCache();
  }
  else
  {
    pdfCacheManager.getDataFromServer();
  }
  &lt;/mx:applicationcomplete&gt;
</code></pre>

<p>In the Dashboard you can now bind to the data in the pdfCacheManager:</p>

<pre><code>&lt;local:dashboard width="100%" dataprovider="{pdfCacheManager.lastResult.list.month as mx.collections.ArrayCollection}" height="100%"&gt;&lt;/local:dashboard&gt;
</code></pre>

<p>Now your Flex application will display data whether it is running on the web or inside a PDF!</p>

<p><strong>Step 6: Adding a way for the user to generate a PDF from the Flex application</strong></p>

<p>Next you’ll want to modify the Flex application so that a user can initiate the PDF generation. To do this I created a simple ActionScript class called &#8220;com.jamesward.portablerias.CreatePDFService&#8221; which will pass the data in the Flex application to the back-end PDFService. Here is the code for that class:</p>

<pre><code>package com.jamesward.portablerias
{
  import flash.net.URLRequest;
  import flash.net.navigateToURL;

  import mx.rpc.events.FaultEvent;
  import mx.rpc.events.ResultEvent;
  import mx.rpc.remoting.RemoteObject;

  public class CreatePDFService
  {
    private var ro:RemoteObject;

    public function CreatePDFService()
    {
      ro = new RemoteObject("PDFService");
      ro.addEventListener(ResultEvent.RESULT, handleResult);
    }

    public function generatePDF(xmlString:String):void
    {
      var xmlData:XML = &lt;portablerias&gt;&lt;data&gt;{xmlString}&lt;/data&gt;&lt;/portablerias&gt;;

      ro.generatePDF(xmlData);
    }

    private function handleResult(event:ResultEvent):void
    {
      var url:String = event.result as String;
      navigateToURL(new URLRequest(url), "_blank");
    }

  }
}
</code></pre>

<p>When the PDFService is called it is passed an XML block containing the XML data that the Flex application loaded from the server. Although you could use alternative serialization methods instead of XML, for simplicity this demo uses XML. Notice that the data is wrapped in the <PortableRIAs> and <Data> XML tags. These must match the PDF form name and form field name used in the PDF template.</p>

<p>When the result is returned by the server the client opens a new browser window pointing to the download servlet that initiates the PDF download.</p>

<p>To use this class in the main Flex application simply create an instance of the CreatePDFService:</p>

<pre><code>&lt;portablerias:createpdfservice id="createPDFService"&gt;&lt;/portablerias:createpdfservice&gt;
</code></pre>

<p>Then add a button for the user to click to initiate the PDF generation:</p>

<pre><code>    &lt;mx:button visible="{!pdfCacheManager.inPDF}" includeinlayout="{!pdfCacheManager.inPDF}" label="Create PDF"&gt;
      &lt;mx:click&gt;
      createPDFService.generatePDF(pdfCacheManager.lastXMLResult);
      &lt;/mx:click&gt;
    &lt;/mx:button&gt;
</code></pre>

<p>Notice that the data passed to the generatePDF method is pulled out of the pdfCacheManager that was created in the previous step. Also the button is only made visible when the Flex application is not running inside a PDF.</p>

<p><strong>Step 7: Merging the final Flex application into the PDF template</strong></p>

<p>Hopefully your Flex application compiles and is working in the browser. The final step is to update the PDF template and include the Flex application into it. It would be nice to automate this step somehow but at this time I’m not aware of a method for doing this. Also one thing to note is that you are using the same application for the browser and for the PDF. You can create different applications if you want to and still use much of the same code. But for this demo using the same Flex application for both mediums works fine.</p>

<p>First open the PDF template in Acrobat, then choose Tools > Multimedia > Flash Tool. Drag a box that will contain the Flex application (you’ll resize it later). Browse and select the SWF file for your Flex application. Select &#8220;Show Advanced Options&#8221; and set the &#8220;Enabled When&#8221; option to &#8220;When the page containing the content is opened&#8221;. Click OK. To resize the Flex application choose Tools > Advanced Editing > Select Object Tool. Then select the image of the Flex application and resize it. The PDF should look like the following:</p>

<p><img src="/wordpress/wp-content/uploads/2008/10/portable_rias-acrobat.jpg" alt="" /></p>

<p>Save the PDF to the file location specified in the PDFService Java class. In my case this is &#8220;WEB-INF/pdfgen/dashboard.pdf&#8221;.</p>

<p>Everything should now be ready to go! Pull up your Flex application in the browser, click the &#8220;Create PDF&#8221; button, and then you should be looking at the Flex application with its data inside of a PDF! If the PDF opened in your browser you can save it to your local file system and load it in the standalone Reader. Also make sure that clicking the &#8220;Update Data&#8221; button works to refresh the data from the server.</p>

<p>There is a <a href="http://pc.de/pages/portable-rias-flex-apps-in-pdfs-be">Belorussian translation</a> of this article (provided by <a href="http://pc.de/">PC</a>).</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/03/lincvolt-flex-app-in-salesforce-keynote/">LincVolt Flex App in Salesforce Keynote</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-03T14:24:55-07:00" pubdate data-updated="true">Nov 3<span>rd</span>, 2008</time>
        
         | <a href="/2008/11/03/lincvolt-flex-app-in-salesforce-keynote/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;m here at day one of Dreamforce 2008, Salesforce.com&#8217;s annual conference.  During Marc Benioff&#8217;s keynote they announced the new <a href="http://developer.force.com/sites">Force.com Sites</a> technology for Salesforce hosted websites which can integrate with Salesforce data.  At the end of the keynote Marc brought out Neil Young to talk about <a href="http://lincvolt.force.com">LincVolt</a>, an open community for converting gasoline based cars to electric / compressed natural gas cars.  It&#8217;s a very cool project but what I was really excited about was their use of Flex on the <a href="http://lincvolt.force.com">Force.com Sites powered LincVolt website</a>.  Here is a camera phone picture of the keynote (notice the sexy Flex chart at the bottom - which you can also see by going to the site).</p>

<p><a href="http://lincvolt.force.com"><img src="http://www.jamesward.com/wordpress/wp-content/uploads/2008/11/img00106.jpg" alt="" /></a></p>

<p>Very cool stuff!</p>

<p>Walking around the expo floor I&#8217;m seeing a ton of Flex.  I&#8217;m trying to get it all on video.  So keep watching here for more details on what people are doing with Salesforce and Flex.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/10/30/ria-cowboy-videos-neotys-flex-load-testing/">RIA Cowboy Videos - Neotys - Flex Load Testing</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-10-30T12:54:50-06:00" pubdate data-updated="true">Oct 30<span>th</span>, 2008</time>
        
         | <a href="/2008/10/30/ria-cowboy-videos-neotys-flex-load-testing/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Since I&#8217;m frequently at conferences meeting cool people I thought it would be fun to start recording videos of some of the great things I get to see in my travels.  For lack of a more creative title I&#8217;m just calling these &#8220;RIA Cowboy Videos&#8221;.  This first video is from AjaxWorld 2008 where I had the guys from <a href="http://www.neotys.com/">Neotys</a> talk about and show off their product <a href="http://www.neotys.com/load-testing-tool/Overview.html?from=mid">NeoLoad</a>, that load tests Flex applications.  Interestingly I just watched a <a href="http://myflex.org//demos/JettyBlazeDS/JettyBlazeDSloadTest.html">screencast</a> by the <a href="http://www.faratasystems.com/">Farata Systems</a> guys where they used NeoLoad to load test BlazeDS on Jetty using the new Servlet 3 NIO stuff.  Detailed article <a href="http://flex.sys-con.com/node/720304">here</a>.</p>

<p>Here&#8217;s the video.  Let me know what you think!</p>

<p>BTW: I&#8217;m a total video novice so the quality of these videos will hopefully improve over time.  I&#8217;ve already purchased a new Bluetooth mic, which should improve the sound quality in future videos.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/10/30/drunk-on-software-episode-2-automated-testing-with-flexmonkey/">Drunk on Software Episode 2 - Automated Testing With FlexMonkey</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-10-30T09:04:33-06:00" pubdate data-updated="true">Oct 30<span>th</span>, 2008</time>
        
         | <a href="/2008/10/30/drunk-on-software-episode-2-automated-testing-with-flexmonkey/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We&#8217;ve just posted <a href="http://www.drunkonsoftware.com/2008/10/30/episode-2-flex-automated-testing-and-flexmonkey/">episode 2</a> of the new &#8221;<a href="http://www.drunkonsoftware.com">Drunk on Software</a>&#8221; video podcast.  In this episode <a href="http://www.ectropic.com">Jon Rose</a> and I talk with Stu Stern from <a href="http://www.gorillalogic.com/">Gorilla Logic</a> about automated testing and <a href="http://code.google.com/p/flexmonkey/">FlexMonkey</a> - a tool for automating unit tests in Flex.  Let us know what you think.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/10/30/flex-at-dreamforce-2008/">Flex at Dreamforce 2008</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-10-30T08:49:10-06:00" pubdate data-updated="true">Oct 30<span>th</span>, 2008</time>
        
         | <a href="/2008/10/30/flex-at-dreamforce-2008/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Just a quick note to let everyone know that I&#8217;ll be at Salesforce.com&#8217;s Dreamforce conference next week in San Francisco.  On Tuesday I&#8217;ll be <a href="http://www.salesforce.com/dreamforce/DF08/tracks/learn.jsp?s=2#">co-presenting a session</a> on using Adobe AIR and Flex with Force.com.  The rest of the time I&#8217;ll probably be in the developer lounge hacking on Flex code.  Stop by and say hello!</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/21/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/page/19/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("_JamesWard", 5, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/_JamesWard" class="twitter-follow-button" data-show-count="false">Follow @_JamesWard</a>
  
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/101156657838073927919?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/jamesward">@jamesward</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'jamesward',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/12/12/heroku-jug-tour-boulder-phoenix-portland/">Heroku JUG Tour: Boulder, Phoenix, & Portland</a>
      </li>
    
      <li class="post">
        <a href="/2011/12/11/tutorial-play-framework-jpa-json-jquery-heroku/">Tutorial: Play Framework, JPA, JSON, jQuery, & Heroku</a>
      </li>
    
      <li class="post">
        <a href="/2011/11/30/using-mongodb-for-a-java-web-apps-httpsession/">Using MongoDB for a Java Web App&#8217;s HttpSession</a>
      </li>
    
      <li class="post">
        <a href="/2011/11/30/heroku-java-user-group-tour-columbus-and-orange-county/">Heroku Java User Group Tour: Columbus and Orange County</a>
      </li>
    
      <li class="post">
        <a href="/2011/11/29/heroku-preso-from-devoxx-2011/">Heroku Preso from Devoxx 2011</a>
      </li>
    
  </ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2011 - James Ward -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jamesward';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
