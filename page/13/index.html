
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>James Ward</title>
  <meta name="author" content="James Ward">

  
  <meta name="description" content="Combining the power of the cloud and the client allows developers to have the best of both worlds - easy deployment and full client capabilities. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jamesward.github.com/page/13">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="James Ward" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-784803-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">James Ward</a></h1>
  
    <h2>Heroku | Java | Scala | Cloud | Open Source | Linux</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jamesward.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about-james-ward">About James Ward</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/09/01/building-rich-cloud-applications-with-force-com-and-flex/">Building Rich Cloud Applications With Force.com and Flex</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-09-01T19:00:59-06:00" pubdate data-updated="true">Sep 1<span>st</span>, 2009</time>
        
         | <a href="/2009/09/01/building-rich-cloud-applications-with-force-com-and-flex/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Combining the power of the cloud and the client allows developers to have the best of both worlds - easy deployment and full client capabilities.  Salesforce.com&#8217;s cloud platform, called Force.com, and the Flash Platform are two proven and reliable choices for building these types of Rich Cloud Applications.  Last week I co-hosted a webinar called &#8220;Developing Rich User Interfaces on Force.com Using Adobe Flex&#8221; in which Ryan Marples (from Salesforce.com) and I walked through the two platforms and how to use them together to build great software.  If you didn&#8217;t have the chance to join the webinar then please go watch <a href="https://admin.acrobat.com/_a13852757/p23759608/">the recording</a> and let us know what you think.</p>

<p>In the webinar we didn&#8217;t have a chance to walk through all of the details of building Rich Cloud Applications with Force.com and Flex so here is a tutorial and the <a href="/demos/CarIncident.zip">source code</a> for the highly desired car insurance demo.</p>

<p><strong>Overview</strong></p>

<p>With Rich Cloud Applications the back-end and front-end are distinctly different pieces.  The first step when building these types of applications is to identify the domain model that will be used on the back-end for longterm persistence.  Force.com will take care of all the details around scalability, reliability, disaster recovery, constraints, security, etc.  All we need to do is describe the model in Force.com.  In this case the model is for a piece of the insurance demo I frequently do.  Here is a screenshot:</p>

<p><img src="http://www.jamesward.com/blog/wp-content/uploads/2009/09/insuricorp.jpg" alt="insuricorp" /></p>

<p>The information we need to store for this demo is the coordinates of all four cars and the coordinates of the crash indicator.  In the next section we will describe that data model on Force.com.</p>

<p>Since the front-end will be built with Flex you will need either <a href="http://www.adobe.com/go/flex_trial">Flex Builder</a> (60 day trial available) or the <a href="http://opensource.adobe.com">open source Flex SDK</a>.  This tutorial will assume you are using Flex Builder.  Flex contains many out-of-the-box components but the car dragging UI used in the insurance demo is not one of them.  The section about building the front-end will walk through some of the Flex code used to create that UI.  If you want to learn more about creating custom components in Flex there is great documentation on the <a href="http://www.adobe.com/devnet/flex/components.html">Adobe Developer Connection</a>.  Also if you want to see the components that are available in Flex then check out <a href="http://flex.org/tour">Tour de Flex</a>.</p>

<p>Once the Flex application has been built, this tutorial will walk through the steps to put it up on the Force.com cloud.</p>

<p><strong>Setting up the Back-end</strong></p>

<p>To begin setting up the back-end on Force.com you will need a <a href="http://developer.force.com">developer account</a>.  Once logged in you can go into the Setup mode by clicking on the &#8220;Setup&#8221; link at the top of the page.  Setup mode is where you will configure the back-end data model on Force.com and deploy the Flex application after it&#8217;s built.  On the left side of the Setup page you will see a section titled App Setup and underneath that a link titled &#8220;Create&#8221;.  Click that link and then click the &#8220;Objects&#8221; link which will now appear in the list. This is where custom objects on Force.com are created and configured.</p>

<p>Add a new custom object titled &#8220;AccidentReport&#8221;.  Then on that object create a few custom fields:</p>

<ul>
<li><p>Date_of_Accident  -  The type is Date.  This field will store the date the accident happened.</p></li>
<li><p>IncidentX  -  The type is Number.  This field will store the X coordinate of the crash indicator.</p></li>
<li><p>IncidentY  -  The type is Number.  This field will store the Y coordinate of the crash indicator.</p></li>
</ul>


<p>Next create another custom object titled &#8220;IncidentCar&#8221;.  On that object create these custom fields:</p>

<ul>
<li><p>StartX  -  The type is Number.  This field will store the X coordinate of the starting car&#8217;s position.</p></li>
<li><p>StartY  -  The type is Number.  This field will store the Y coordinate of the starting car&#8217;s position.</p></li>
<li><p>EndX  -  The type is Number.  This field will store the X coordinate of the ending car&#8217;s position.</p></li>
<li><p>EndY  -  The type is Number.  This field will store the Y coordinate of the ending car&#8217;s position.</p></li>
<li><p>AccidentReport  -  This is a Master-Detail Relationship where the relationship is to the AccidentReport.</p></li>
</ul>


<p>The data model has now been configured on Force.com and is ready for use.  You may want to add a few fake records (an AccidentReport with two cars) manually to test the data model.</p>

<p><strong>Building the Flex Client</strong></p>

<p>Now that the Force.com back-end is configured we can begin building the Flex client.  The client can run in three ways:</p>

<ol>
<li><p>Embedded in a Force.com page</p></li>
<li><p>On your own server</p></li>
<li><p>As a desktop application using Adobe AIR</p></li>
</ol>


<p>In this tutorial we will use option 1.  The details for deploying the application will be covered in the next section.</p>

<p>In order to connect to Force.com we need to download the <a href="http://developer.force.com/flextoolkit">Force.com Toolkit for Adobe AIR and Flex</a>.</p>

<p>Start by creating a new Flex Project in Flex Builder.  Then copy the force-flex.swc file from the Toolkit into the project&#8217;s libs folder.  In your application start with something simple like:</p>

<pre><code>&lt;mx:application xmlns:salesforce="http://www.salesforce.com/" xmlns:mx="http://www.adobe.com/2006/mxml"&gt;

  &lt;mx:script&gt;
    import com.salesforce.AsyncResponder;
    import com.salesforce.objects.LoginRequest;
    import com.salesforce.results.LoginResult;
    import com.salesforce.results.QueryResult;
  &lt;/mx:script&gt;

  &lt;mx:applicationcomplete&gt;
    var lr:LoginRequest = new LoginRequest();
      lr.username = "YOUR USER NAME";
      lr.password = "YOUR PASSWORD";
      lr.callback = new AsyncResponder(
        function(result:LoginResult):void {
          conn.query("Select Id, IncidentX__c, IncidentY__c, Date_of_Accident__c from AccidentReport__c",
            new AsyncResponder(function(result:QueryResult):void {
              dg.dataProvider = result.records;
            }));
      });
      conn.login(lr);
  &lt;/mx:applicationcomplete&gt;

  &lt;salesforce:connection id="conn"&gt;&lt;/salesforce:connection&gt;

  &lt;mx:datagrid id="dg"&gt;&lt;/mx:datagrid&gt;

&lt;/mx:application&gt;
</code></pre>

<p>Give it a try by running the application.  This simply logs in, fetches the AccidentReports and displays them in a DataGrid.  Make sure that you have some sample data on Force.com before you run this.  Otherwise you will get an error.  That is a simple read-only view of some data on the Force.com cloud!  However the full Car Incident application requires quite a bit more code.  You can <a href="/demos/CarIncident.zip">download the code</a> and then copy and paste the files into your project.</p>

<p>Let&#8217;s walk through the application requirements:</p>

<ol>
<li><p>Retrieve a list of AccidentReports</p></li>
<li><p>Allow the user to select an AccidentReport</p></li>
<li><p>Retrieve the IncidentCars for the selected AccidentReport</p></li>
<li><p>Allow the user to create a new AccidentReport</p></li>
<li><p>Allow the user to position the crash indicator and cars in the AccidentReport</p></li>
<li><p>Save the changes to Force.com</p></li>
</ol>


<p>When we started building our back-end we modeled the data in Force.com.  Now we need a client-side model of the data.  The two value objects for this purpose are AccidentReport.as and Car.as.  Those two value objects contains public properties corresponding to the values we need to hold once we get data back from Force.com.  They also have a constructor that can map the data format from Force.com to the value object&#8217;s properties.  For instance the Car value object&#8217;s constructor does the following:</p>

<pre><code>    public function Car(o:Object=null)
    {
      if (o != null)
      {
        id = o.Id;
        startX = o.StartX__c;
        startY = o.StartY__c;
        endX = o.EndX__c;
        endY = o.EndY__c;
      }
    }
</code></pre>

<p>This simply sets the properties on an instance of Car to the data values retrieved from Force.com.  Later on you will see where those values come from and how we create new Car value objects.</p>

<p>Now that the client-side data model has been created we need a central place that will hold our value objects.  The easiest way to do this is to create a Singleton called Model.  You can find it in the Model.as class.  The model contains properties which store information about the current state of the Flex application.  In this case the state properties our application needs are:</p>

<ul>
<li><p>statusMessage:String  -  Holds messages related to server communication</p></li>
<li><p>loggedIn:Boolean  -  Specifies whether or not the user is logged in</p></li>
<li><p>accidentReports:ArrayCollection  -  Stores all of the AccidentReports that get fetched from the server</p></li>
<li><p>selectedAccidentReport:AccidentReport  -  The AccidentReport selected by the user (if any)</p></li>
</ul>


<p>Next we will setup a Controller that manages the communication to Force.com and updates the Model.  You can find the source code in the Controller.as class.  This class contains an instance of the Connection object from the Toolkit, which will actually do the communication to Force.com&#8217;s SOAP API.  It also contains a reference to the Singleton Model.  The controller exposes several public methods that support the requirements listed above.  These are:</p>

<ul>
<li><p>login(sessionId:String, serverUrl:String):void  -  A method that logs into Force.com based on the sessionId and serverUrl provided by the Force.com page.  Flex applications running outside of Force.com (on your own website or as a desktop application) will not have a sessionId so they will need to set the username and password instead.</p></li>
<li><p>getAccidentReports():void  -  Does a query for the AccidentReports owned by the authenticated user.</p></li>
<li><p>createAccidentReport():void  -  Creates a new AccidentReport.</p></li>
<li><p>getAccidentReport(accidentReport:AccidentReport):void  -  Fetches the IncidentCars for a given AccidentReport.</p></li>
<li><p>saveAccidentReport(accidentReport:AccidentReport):void  -  Updates an AccidentReport and its associated IncidentCars.</p></li>
</ul>


<p>All network requests in Flex happen asynchronously.  This means that all requests to Force.com also happen asynchronously; so while the methods listed above can make the request, other private functions are used to actually handle the server response and then update the Model.  For instance when the response from the query in getAccidentReports returns, the model is updated in the following way:</p>

<pre><code>    private function getAccidentReportsResult(qr:QueryResult):void
    {
      model.accidentReports = new ArrayCollection();

      // store AccidentReports
      for each (var o:Object in qr.records)
      {
        model.accidentReports.addItem(new AccidentReport(o));
      }
    }
</code></pre>

<p>Notice that the records returned from the server are typed as Objects.  In the for loop we use the mapping in AccidentReport&#8217;s constructor to convert the Object to a typed AccidentReport.</p>

<p>Now that the Model and Controller are setup the next task is to build the UI.  The UI is built with a number of components:</p>

<ul>
<li><p>CarShape.as  -  A class that draws a single car.</p></li>
<li><p>DraggableCars.as  -  Has two CarShapes and draws a curved line between them.  Also has a Car value object which is used to position the CarShapes.  When the user drags a CarShape the underlying Car is updated.</p></li>
<li><p>Accident.mxml  -  Has an AccidentReport value object, two DraggableCars, and a crash indicator.  The cars stored on the AccidentReport are passed to the DraggableCars.  When the crash indicator is moved the AccidentReport value object is updated.</p></li>
<li><p>AccidentReportView.mxml  -  Contains the Controller, a DataGrid that displays the list of all AccidentReports, an Accident that is displayed when the user selects an item in the DataGrid, and buttons that allow the user to create, save, or close an AccidentReport.</p></li>
<li><p>CarIncident.mxml  -  The main application that contains an AccidentReportView and does the login when the application loads.</p></li>
</ul>


<p>Describing how the custom UI components work is beyond the scope of this article.  However it&#8217;s important to describe how the Model, View, and Controller interact.  In the AccidentReportView the Accident uses data binding to setup an observer on the model.  When the observer observes a change it lets the view know so that it can refresh its view of the model.  The instance of the Accident uses data binding for two things:</p>

<pre><code>&lt;cars:accident visible="{Model.getInstance().selectedAccidentReport != null}" accidentreport="{Model.getInstance().selectedAccidentReport}" id="accident"&gt;&lt;/cars:accident&gt;
</code></pre>

<p>First the accidentReport value object of the Accident is set to data bind to the Model&#8217;s selectedAccidentReport.  When that value changes the data binding observer will notify the Accident about the change.  Second, the Accident is only visible when the Model&#8217;s selectedAccidentReport is not null.</p>

<p>The AccidentReportView also interacts with the controller by calling its public methods.  Here&#8217;s an example:</p>

<pre><code>        &lt;mx:button label="Save"&gt;
          &lt;mx:click&gt;
            controller.saveAccidentReport(accident.accidentReport);

            accidentReportDataGrid.selectedItem = null;
            Model.getInstance().selectedAccidentReport = null;
          &lt;/mx:click&gt;
        &lt;/mx:button&gt;
</code></pre>

<p>When the user clicks the save button, the event handler calls the Controller&#8217;s saveAccidentReport method passing it the currently selected AccidentReport.  Since the components internally have made changes to the AccidentReport those changes are then propagated to Force.com by calling the Connection&#8217;s update method.  The save button&#8217;s event handler also deselects the currently selected item in the DataGrid and sets the selectedAccidentReport on the Model to null.</p>

<p>Now that you have a fully functional Rich Cloud Application built with Force.com and Flex the next step is to make that application available on the cloud.</p>

<p><strong>Deploying the Flex Client</strong></p>

<p>When in the development phase it may be convenient to hard code your username and password into the application like we did in the simple example above.  However, you should never do that in a production application.  If you are deploying on a Force.com page then you can use the session_id.  Here is an example:</p>

<pre><code>      conn.serverUrl = parameters.server_url;

      var lr:LoginRequest = new LoginRequest();
      lr.session_id = parameters.session_id;
      lr.server_url = parameters.server_url;
      lr.callback = new AsyncResponder(loginResult, loginFault);
      conn.login(lr);
</code></pre>

<p>The parameters are available on the main Application and are passed into the application using the apex:flash VisualForce tag, which we will setup later.</p>

<p>Once your application is set up to use the session_id then you will need to create a release build of the Flex project.  To do that follow the Export -> Flex -> Release Build wizard.  This will create a smaller SWF file (the application) that will later be uploaded to Force.com.</p>

<p>To deploy the application go into the Force.com Setup mode, click on Develop under App Setup, and then click on Static Resources.  Create a new resource called &#8220;CarIncident&#8221; and upload the application&#8217;s SWF file found in the bin-release folder under the project.  Then under Develop, click Pages and add a new Page called &#8220;AccidentReport&#8221;.  Put the following code in the page:</p>

<pre><code>&lt;apex:page&gt;
    &lt;apex:pageblock&gt;
        &lt;apex:flash src="{!$Resource.CarIncident}" height="500" flashvars="session_id={!$Api.Session_ID}&amp;server_url={!$Api.Partner_Server_URL_150}" width="500"&gt;&lt;/apex:flash&gt;
    &lt;/apex:pageblock&gt;
&lt;/apex:page&gt;
</code></pre>

<p>Save the page and then you should be able to access it by going to:
<a href="https://na1.salesforce.com/apex/AccidentReport">https://na1.salesforce.com/apex/AccidentReport</a></p>

<p>If my instructions are accurate then hopefully you will now see the CarIncident application on the cloud pulling data from Force.com like this screenshot:
<img src="http://www.jamesward.com/blog/wp-content/uploads/2009/09/carincident.jpg" alt="carincident" /></p>

<p>This is just a basic walk through of how to build Rich Cloud Applications with Force.com and Flex.  There are tons of additional features and configuration changes you can make on both the back-end and front-end.  But hopefully this helps you get started building Rich Cloud Applications with Force.com and Flex.  Let me know how it goes!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/09/01/my-max-2009-sessions/">My MAX 2009 Sessions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-09-01T10:09:16-06:00" pubdate data-updated="true">Sep 1<span>st</span>, 2009</time>
        
         | <a href="/2009/09/01/my-max-2009-sessions/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://max.adobe.com/">MAX 2009</a> is coming fast!  It&#8217;s going to be another great event with tons of great speakers and after party fun.  Here are my sessions this year:</p>

<ul>
<li><p><a href="http://max.adobe.com/scheduler/#view=1;session=38f90275-4f7f-4c9e-9456-a87ae4428a8a">Introduction to BlazeDS and LiveCycle Data Services</a></p></li>
<li><p><a href="http://max.adobe.com/scheduler/#view=1;session=3ed8c7b5-d2fc-4572-b4fd-44e7ab9b4da6">Designing for Augmented Reality</a></p></li>
<li><p><a href="http://max.adobe.com/scheduler/#view=1;session=51f7122b-42e8-4c10-ad75-d87e7a62aa98">Building Flex and Adobe AIR Service Clients 2009</a></p></li>
<li><p><a href="http://max.adobe.com/scheduler/#view=1;session=536613cb-9409-4187-81ec-7d00607c2786">Flex and Adobe AIR Boot Camp</a></p></li>
</ul>


<p>Also <a href="http://www.drunkonsoftware.com">Drunk on Software</a> will be there filming some episodes.</p>

<p>So this is certainly a MAX you don&#8217;t want to miss!  I hope to see you there!</p>

<p>Also check out the very cool MAX Widget (there are some funny facts about me in there):
<img src="http://counters.gigya.com/wildfire/IMP/CXNID=2000002.0NXC/bT*xJmx*PTEyNTE4MjI2MTI4MzgmcHQ9MTI1MTgyMjYyMjY5NSZwPTc3NDM3MSZkPW1heDA5d2lkZ2V*Jmc9MyZvPTRhYTY5MWUyMDYwZjQ4MzFhNDEyNDg4ZWVlOTMyN2VjJnM9d2Via2l*Y2hlbi5iZSZvZj*w.gif" alt="" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/08/24/drunk-on-software-with-dion-almaer-and-ben-galbraith/">Drunk on Software With Dion Almaer and Ben Galbraith</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-08-24T08:46:27-06:00" pubdate data-updated="true">Aug 24<span>th</span>, 2009</time>
        
         | <a href="/2009/08/24/drunk-on-software-with-dion-almaer-and-ben-galbraith/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It was really fun to be able to sit down and record an episode with Ben and Dion.  They are great guys who are at the center of the tech industry.  Let me know what you think of the episode.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/08/17/flex-and-java-festivities-next-week-in-florida/">Flex and Java Festivities Next Week in Florida</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-08-17T11:31:49-06:00" pubdate data-updated="true">Aug 17<span>th</span>, 2009</time>
        
         | <a href="/2009/08/17/flex-and-java-festivities-next-week-in-florida/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ll be in Florida next week for a few great Flex and Java events:</p>

<ul>
<li><p>Tuesday August 25 - <a href="http://www.codetown.us/events/flex-jam">Flex Jam in Winter Park, FL</a> - This is a bring your own laptop, self-paced learning event.  Anyone, at any level of Flex knowledge is welcome.</p></li>
<li><p>Wednesday August 26 - <a href="http://www.codetown.us/events/gatorjug-flex">Flex and Java at the GatorJUG</a></p></li>
<li><p>Thursday August 27 - <a href="http://www.codetown.us/events/orlandojug-flex">Flex and Java at the Orlando JUG</a></p></li>
</ul>


<p>If you live in Florida then I hope to see you at these events!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/08/12/ask-the-ria-cowboy/">Have a Question Unrelated to a Blog Post?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-08-12T08:37:49-06:00" pubdate data-updated="true">Aug 12<span>th</span>, 2009</time>
        
         | <a href="/2009/08/12/ask-the-ria-cowboy/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you have a technical question that is unrelated to one of my blog posts, then here is what to do&#8230;  If that question is specific to you and no one else in the developer community, then email me at jaward at adobe dot com (obfuscated to avoid spam).  I will respond to your email but response times can greatly fluctuate.  If you have a more general technical question that pertains to the broader developer community then do the following (this option will usually yield a response within hours):</p>

<ol>
<li><p><a href="http://stackoverflow.com/questions/ask">Ask a Question</a> on StackOverflow.com</p></li>
<li><p>Post a comment here with a link to the question</p></li>
<li><p>Wait for me or someone else on StackOverflow to respond</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/08/11/fonts-in-flex-4-flash-player-10-air-1-5-make-me-happy/">Fonts in Flex 4 / Flash Player 10 / AIR 1.5 Make Me Happy</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-08-11T15:05:52-06:00" pubdate data-updated="true">Aug 11<span>th</span>, 2009</time>
        
         | <a href="/2009/08/11/fonts-in-flex-4-flash-player-10-air-1-5-make-me-happy/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Device font rendering in Flash content has always had some limitations, including the inability for text to be correctly scaled, rotated, and faded.  Due to these limitations many developers using Flex resort to embedding fonts.  But this can really bloat the size of applications - especially when working with non-English languages.  Luckily Flash Player 10 / AIR 1.5 added a new font engine!  To make using the new engine easy Adobe also created an open source library called the <a href="http://opensource.adobe.com/wiki/display/tlf/Text+Layout+Framework">Text Layout Framework</a>, which wraps Flash Player&#8217;s low level text APIs.  Flex 4 Spark components use the Text Layout Framework for all text rendering.  The end result is much better device font support in Flex applications.  Here&#8217;s a quick example (<a href="http://www.jamesward.com/demos/fontTest/srcview/index.html">view source</a>):</p>

<p>Drag the slider to change the scaleX and scaleY on the Panels.  Notice how the Flex 3 / Flash Player 9 text jumps around and flickers.  And then notice how the Flex 4 / Flash Player 10 text looks wonderful as it scales up and down!  That makes me happy.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/08/10/tour-de-flex-and-java-sacramento-san-diego-detroit-and-salt-lake-city/">Tour De Flex and Java - Sacramento, San Diego, Detroit, and Salt Lake City</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-08-10T11:09:30-06:00" pubdate data-updated="true">Aug 10<span>th</span>, 2009</time>
        
         | <a href="/2009/08/10/tour-de-flex-and-java-sacramento-san-diego-detroit-and-salt-lake-city/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ll be presenting about Flex and Java at some Java User Groups over the next few weeks.  Here&#8217;s the lineup:</p>

<ul>
<li><p><a href="http://www.sacjug.org/">Sacramento - August 11</a></p></li>
<li><p><a href="http://www.sdjug.com/">San Diego - August 18</a></p></li>
<li><p><a href="http://sites.google.com/site/detroitjug/">Detroit - August 19</a></p></li>
<li><p><a href="http://www.ujug.org/">Salt Lake City - August 20</a></p></li>
</ul>


<p>Hope to see you at one of these JUGs!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/08/03/drunk-on-software-with-universal-mind-spatialkey/">Drunk on Software With Universal Mind / SpatialKey</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-08-03T14:24:37-06:00" pubdate data-updated="true">Aug 3<span>rd</span>, 2009</time>
        
         | <a href="/2009/08/03/drunk-on-software-with-universal-mind-spatialkey/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In this episode of <a href="http://www.drunkonsoftware.com">Drunk on Software</a>, <a href="http://gorillajawn.com/wordpress/">Jon Rose</a> and I catch up with Tom Link, <a href="http://www.bpurcell.org/">Brandon Purcell</a>, and <a href="http://dougmccune.com/blog/">Doug McCune</a> from <a href="http://www.universalmind.com/">Universal Mind</a>.  We chat about <a href="http://spatialkey.com/">SpatialKey</a>, one of the most impressive Flex applications I&#8217;ve seen.  So grab your favorite beverage, sit back, relax, and get Drunk on Software.  :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/07/26/webinar-developing-rich-user-interfaces-on-force-com-using-adobe-flex/">Webinar: Developing Rich User Interfaces on Force.com Using Adobe Flex</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-26T03:27:52-06:00" pubdate data-updated="true">Jul 26<span>th</span>, 2009</time>
        
         | <a href="/2009/07/26/webinar-developing-rich-user-interfaces-on-force-com-using-adobe-flex/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>On August 27 I&#8217;ll be co-presenting a webinar - <a href="https://www.developerforce.com/events/techtalk_arch_app_air_flex_webinar/registration.php?d=70130000000EqU8">Developing Rich User Interfaces on Force.com Using Adobe Flex</a>.  This will be a great opportunity to learn more about combining Cloud and RIA to create software that works well for end users and significantly reduces IT costs.  If this interests you then <a href="https://www.developerforce.com/events/techtalk_arch_app_air_flex_webinar/registration.php?d=70130000000EqU8">go sign-up now</a>.  Hope to &#8220;see&#8221; you on August 27th.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/07/22/protected-messaging-in-flex-with-blazeds-and-lcds/">Protected Messaging in Flex With BlazeDS and LCDS</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-22T08:47:49-06:00" pubdate data-updated="true">Jul 22<span>nd</span>, 2009</time>
        
         | <a href="/2009/07/22/protected-messaging-in-flex-with-blazeds-and-lcds/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>UPDATE: BlazeDS 4 and LCDS 3.1 now have built-in support to <a href="https://bugs.adobe.com/jira/browse/BLZ-415">disallow subscriptions to wildcard subtopics</a>.  Just set the following parameter on the messaging destination&#8217;s server properties:</p>

<pre><code>&lt;disallow-wildcard-subtopics&gt;false&lt;/disallow-wildcard-subtopics&gt;
</code></pre>

<p>You no longer need to use the ProtectedMessagingAdapter from the code examples below in order to protect your messages.</p>

<p>One of the great things about Flex is how easy it is to set up publish and subscribe messaging using BlazeDS, LCDS, or other various server technologies.  Basically a Flex application can be either a Consumer of messages from the server, a Producer of messages to the server, or both.  The channels that are used for the actual transport can vary dramatically depending on the needs.  <a href="http://devgirl.wordpress.com/2009/07/14/livecycle-data-services-channels-and-endpoints-explained/">Here is a great blog</a> that explains the different transports.  No matter what transport / channel is used the API in Flex is the same.  If you&#8217;d like to see how to use those APIs check out <a href="http://www.jamesward.com/blog/2008/07/21/video-flex-and-java/">this video</a> I recorded.</p>

<p>Many times with pub/sub messaging the messages should only be sent to a subset of the subscribers.  There are two ways to achieve this in Flex - either using a subtopic or a selector.  Subtopics allow simple dot separated expressions such as &#8220;stocks.ADBE&#8221; which would allow Flex clients to subscribe to only messages about the ADBE stock.  A Flex client could also subscribe to wild card subtopics like &#8220;stocks.<em>&#8221; or &#8221;</em>&#8221;.  The developer usually hard codes the subtopics (if any) that an app will use.</p>

<p>Subtopics seem like a great way to send point-to-point or point-to-group messages.  To send a message to a particular client it&#8217;s as easy as setting the subtopic of the message to a special complex token - usually a generated UID or the server&#8217;s session ID.  The subscriber then subscribes to a subtopic with that particular complex token and none of the other clients listening on that messaging destination will receive that message.  Or maybe they can&#8230;</p>

<p>A malicious developer could easily determine the endpoint being used by an application.  After discovering this they could also very easily create a Flex application that subscribes to the &#8220;*&#8221; subtopic of a messaging destination.  Then the server would send them ALL of the messages on all of the subtopics for that destination.  Pretty scary stuff.  To see an example of this follow these steps:</p>

<ol>
<li><p>Open the <a href="/protectedMessaging/protectedMessaging.html">test application</a></p></li>
<li><p>Open the <a href="/protectedMessaging/HackerApp.html">hacker application</a></p></li>
<li><p>Click the send button in the test application</p></li>
<li><p>Watch the message appear in the regularDestination output panel of the hacker application</p></li>
</ol>


<p>Both panels use the same messaging API and same subtopic to send and receive messages.  However the protectedDestination uses a customized Messaging Adapter that doesn&#8217;t allow subscriptions to subtopics containing a wild card (&#8220;*&#8221;).  Here is the Java code for the ProtectedMessagingAdapter:</p>

<pre><code>package com.jamesward;

import flex.messaging.services.messaging.Subtopic;
import flex.messaging.services.messaging.adapters.ActionScriptAdapter;

public class ProtectedMessagingAdapter extends ActionScriptAdapter
{

  public boolean allowSubscribe(Subtopic subtopic)
  {
    return !(subtopic.containsSubtopicWildcard());
  }

}
</code></pre>

<p>Here is an example of how to use the new adapter in the messaging-config.xml file:</p>

<pre><code>&lt;service id="message-service" class="flex.messaging.services.MessageService"&gt;

    &lt;adapters&gt;
        &lt;adapter-definition id="protectedMessagingAdapter" class="com.jamesward.ProtectedMessagingAdapter"&gt;&lt;/adapter-definition&gt;
    &lt;/adapters&gt;

    &lt;default-channels&gt;
        &lt;channel ref="my-polling-amf"&gt;&lt;/channel&gt;
    &lt;/default-channels&gt;

    &lt;destination id="protectedDestination"&gt;
        &lt;adapter ref="protectedMessagingAdapter"&gt;&lt;/adapter&gt;
        &lt;properties&gt;
            &lt;server&gt;
                &lt;allow-subtopics&gt;true&lt;/allow-subtopics&gt;
                &lt;subtopic-separator&gt;.&lt;/subtopic-separator&gt;
            &lt;/server&gt;
        &lt;/properties&gt;
    &lt;/destination&gt;

&lt;/service&gt;
</code></pre>

<p>If you are using subtopics (or selectors) to protect messages from being sent to the wrong people then I highly recommend that you use my ProtectedMessagingAdapter or something else so that malicious hackers can&#8217;t snoop on private messages or send impostor messages.  In my demo I run both the test app and hacker app on the same server but this can be done in other ways (such as proxy servers or local apps).  Also authentication may not protect you because a malicious user might also be an authenticated user.  So the only solution is to really protect destinations from subscriptions to wild card subtopics.</p>

<p>I hope this is helpful for those using messaging.  Let me know what you think.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/14/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/page/12/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("_JamesWard", 5, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/_JamesWard" class="twitter-follow-button" data-show-count="false">Follow @_JamesWard</a>
  
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/101156657838073927919?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/jamesward">@jamesward</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'jamesward',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/12/12/heroku-jug-tour-boulder-phoenix-portland/">Heroku JUG Tour: Boulder, Phoenix, & Portland</a>
      </li>
    
      <li class="post">
        <a href="/2011/12/11/tutorial-play-framework-jpa-json-jquery-heroku/">Tutorial: Play Framework, JPA, JSON, jQuery, & Heroku</a>
      </li>
    
      <li class="post">
        <a href="/2011/11/30/using-mongodb-for-a-java-web-apps-httpsession/">Using MongoDB for a Java Web App&#8217;s HttpSession</a>
      </li>
    
      <li class="post">
        <a href="/2011/11/30/heroku-java-user-group-tour-columbus-and-orange-county/">Heroku Java User Group Tour: Columbus and Orange County</a>
      </li>
    
      <li class="post">
        <a href="/2011/11/29/heroku-preso-from-devoxx-2011/">Heroku Preso from Devoxx 2011</a>
      </li>
    
  </ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2011 - James Ward -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jamesward';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
