
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Tutorial: Play Framework, JPA, JSON, jQuery, & Heroku - James Ward</title>
  <meta name="author" content="James Ward">

  
  <meta name="description" content="If you are a Java developer then you really need to give Play Framework a try. It is really refreshing to take a few minutes, step out of the legacy- &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jamesward.github.com/2011/12/11/tutorial-play-framework-jpa-json-jquery-heroku">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="James Ward" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-784803-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">James Ward</a></h1>
  
    <h2>Heroku | Java | Scala | Cloud | Open Source | Linux</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jamesward.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about-james-ward">About James Ward</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Tutorial: Play Framework, JPA, JSON, jQuery, & Heroku</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-11T19:20:42-07:00" pubdate data-updated="true">Dec 11<span>th</span>, 2011</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>If you are a Java developer then you really need to give <a href="http://www.playframework.org">Play Framework</a> a try.  It is really refreshing to take a few minutes, step out of the legacy-feeling world of traditional Java web app development and into something modern and fun.  I want to walk you through a very simple tutorial where we will build a web application with Play Framework.  The application will use JPA for persistence and expose access to the data through a JSON over HTTP interface.  The client-side of the application will be built with <a href="http://jquery.com/">jQuery</a>.  Lets get started.</p>

<p><strong>Step 1)</strong> Download and install <a href="http://download.playframework.org/releases/play-1.2.3.zip">Play Framework 1.2.3</a></p>

<p><strong>Step 2)</strong> Create a new Play app from the command line and then move to the new directory:</p>

<pre><code>play new playbars
cd playbars
</code></pre>

<p><strong>Optional Step 3)</strong> If you want to work in an IDE then you can run one of the following commands and then open the generated project in your IDE:</p>

<pre><code>play idealize
</code></pre>

<p>Or:</p>

<pre><code>play eclipsify
</code></pre>

<p>I won&#8217;t walk though the IDE specific steps here, but you can refer to the <a href="http://www.playframework.org/documentation/1.2/ide">Play documentation on IDE integration</a> if you want to get that setup.  Note that IntelliJ IDEA has great support for Play Framework with a console right in the IDE.</p>

<p><strong>Step 4)</strong> Start the Play server from the new project&#8217;s directory :</p>

<pre><code>play run --%test
</code></pre>

<p>This starts Play in test mode which will automatically recompile any changes we make to the application.  No packaging, redeploying, or restarting servers will be needed.</p>

<p><strong>Step 5)</strong> Open the application in your browser:
<a href="http://localhost:9000">http://localhost:9000</a></p>

<p>The default page provides you with great Play documentation on how to get started.  But we will soon be changing that page.  If you want to view the documentation locally after we change the page you can use these links:</p>

<ul>
<li><a href="http://localhost:9000/@documentation/home">Documentation</a></li>
<li><a href="http://localhost:9000/@api/index.html">Play JavaDoc</a></li>
</ul>


<p><strong>Step 6)</strong> Lets start by creating a new JPA entity.  Keeping it very simple, lets create a new <code>app/models/Bar.java</code> file containing:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">models</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">play.db.jpa.Model</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@Entity</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Bar</span> <span class="kd">extends</span> <span class="n">Model</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This entity uses the standard JPA Entity annotation but also extends the Play Model class which provides some nice conveniences which you can read more about <a href="http://www.playframework.org/documentation/1.2.3/jpa">in the Play JPA docs</a>.  I&#8217;m using just a plain public property on this class but you can also use the Java Bean getter/setter stuff in you like.</p>

<p><strong>Step 7)</strong> Create a simple unit / integration test for this Bar object by creating a <code>test/BarTest.java</code> file with the following contents:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">import</span> <span class="nn">org.junit.*</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">play.test.*</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">models.*</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BarTest</span> <span class="kd">extends</span> <span class="n">UnitTest</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Test</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">integrationTest</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">Bar</span> <span class="n">bar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bar</span><span class="o">();</span>
</span><span class='line'>        <span class="n">bar</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">&quot;a new bar&quot;</span><span class="o">;</span>
</span><span class='line'>        <span class="n">bar</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span><span class='line'>        <span class="n">assertNotNull</span><span class="o">(</span><span class="n">bar</span><span class="o">.</span><span class="na">id</span><span class="o">);</span>
</span><span class='line'>        <span class="n">assertTrue</span><span class="o">(</span><span class="n">Bar</span><span class="o">.</span><span class="na">findAll</span><span class="o">().</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="o">);</span>
</span><span class='line'>        <span class="n">bar</span><span class="o">.</span><span class="na">delete</span><span class="o">();</span>
</span><span class='line'>        <span class="n">assertTrue</span><span class="o">(</span><span class="n">Bar</span><span class="o">.</span><span class="na">findAll</span><span class="o">().</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Step 8)</strong> Setup the default database by editing the <code>conf/application.conf</code> file and uncommenting the following line:</p>

<pre><code># db=mem
</code></pre>

<p>This sets up the default database to be an in-memory database.</p>

<p><strong>Step 9)</strong> Run the application&#8217;s tests by opening the following URL in your browser:
<a href="http://localhost:9000/@tests">http://localhost:9000/@tests</a></p>

<p>Select <code>BarTest</code> and then click the <code>Start!</code> button.  The test should pass.</p>

<p><strong>Step 10)</strong> Add the following two methods to the <code>app/controllers/Application.java</code> file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addBar</span><span class="o">(</span><span class="n">Bar</span> <span class="n">bar</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">bar</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
</span><span class='line'>        <span class="n">index</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">listBars</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">renderJSON</span><span class="o">(</span><span class="n">Bar</span><span class="o">.</span><span class="na">findAll</span><span class="o">());</span>
</span><span class='line'>    <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The <em>addBar</em> method takes a <em>Bar</em>, saves it, and then redirects back to the index page.  Play will automatically parse request parameters and populate the <em>Bar</em> object.  The <em>listBars</em> method queries for all of the Bars in the database and then outputs then as serialized JSON.</p>

<p><strong>Step 11)</strong> Play has a very flexible model for mapping URLs to controllers.  Lets setup two new routes that will map URLs to the new methods we&#8217;ve added to the Application controller.  Add the following lines to the <code>conf/routes</code> file but make sure you either add them above the <code>Catch all</code> or simply remove the <code>Catch all</code> route:</p>

<pre><code>POST    /                                       Application.addBar
GET     /bars.json                              Application.listBars
</code></pre>

<p>The first route handles HTTP POST requests to the <code>/</code> URL and handles them with the <em>Application.addBar</em> method.  The second route handles requests to the <code>/bars.json</code> URL and handles them with the <em>Application.listBars</em> method.</p>

<p><strong>Step 12)</strong> Lets add a <a href="http://www.playframework.org/documentation/1.2.4/test#Functionaltest">FunctionalTest</a> that will actually make requests to the Controller and test that our new routes and controller methods are working.  Add the following method to the <code>test/ApplicationTest.java</code> file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>    <span class="nd">@Test</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">barTest</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">Response</span> <span class="n">addBarResponse</span> <span class="o">=</span> <span class="n">POST</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">,</span> <span class="n">APPLICATION_X_WWW_FORM_URLENCODED</span><span class="o">,</span> <span class="s">&quot;bar.name=foo&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="n">assertStatus</span><span class="o">(</span><span class="mi">302</span><span class="o">,</span> <span class="n">addBarResponse</span><span class="o">);</span>
</span><span class='line'>        <span class="n">Response</span> <span class="n">listBarsResponse</span> <span class="o">=</span> <span class="n">GET</span><span class="o">(</span><span class="s">&quot;/bars.json&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="n">assertIsOk</span><span class="o">(</span><span class="n">listBarsResponse</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This test adds a new <em>Bar</em> by doing an HTTP POST to <code>/</code> and passing it some form encoded data.  Then a request is made to <code>/bars.json</code> and the response is checked to make sure there wasn&#8217;t an error.  Since there isn&#8217;t a DELETE method (which could easily be added) there isn&#8217;t a good way to clean up what this test does.</p>

<p>Run the <em>ApplicationTest</em> Functional Test in the Play Framework Web Test Runner:
<a href="http://localhost:9000/@tests?select=ApplicationTest.class">http://localhost:9000/@tests?select=ApplicationTest.class</a></p>

<p>Because the test didn&#8217;t clean up after itself you can now see the JSON from <code>/bars.json</code> in your browser by visiting:
<a href="http://localhost:9000/bars.json">http://localhost:9000/bars.json</a></p>

<p><strong>Step 13)</strong> Now it is time to create the actual web UI for this application.  A combination of plain HTML (via Play&#8217;s Groovy templates) and jQuery will be used.  Play Framework uses a convention to render the HTML from the <code>app/views/Application/index.html</code> template when the render method in <code>Application.index</code> is called.  In the <code>index.html</code> file and you will see:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="err">#</span><span class="o">{</span><span class="kd">extends</span> <span class="err">&#39;</span><span class="n">main</span><span class="o">.</span><span class="na">html</span><span class="err">&#39;</span> <span class="o">/}</span>
</span><span class='line'><span class="err">#</span><span class="o">{</span><span class="n">set</span> <span class="nl">title:</span><span class="err">&#39;</span><span class="n">Home</span><span class="err">&#39;</span> <span class="o">/}</span>
</span><span class='line'>
</span><span class='line'><span class="err">#</span><span class="o">{</span><span class="n">welcome</span> <span class="o">/}</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can also take a look at the referenced <code>app/views/main.html</code> file to see what the base template looks like.  It does the standard HTML page stuff and then inserts the body of the <code>index.html</code> page into the <code>#{doLayout /}</code> section.  The <code>main.html</code> template also loads jQuery and provides a way to insert some JavaScript into the <em>head</em> section of the page.  In the <code>index.html</code> file, replace the <code>#{welcome /}</code> line with a form that will allow users to create new bars:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="err">#</span><span class="o">{</span><span class="n">form</span> <span class="nd">@addBar</span><span class="o">()}</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;bar.name&quot;</span><span class="o">&gt;&lt;/</span><span class="n">input</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="o">&gt;&lt;/</span><span class="n">input</span><span class="o">&gt;</span>
</span><span class='line'><span class="err">#</span><span class="o">{/</span><span class="n">form</span><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The <code>#{form @addBar()}</code> syntax is Groovy that creates a form tag and sets the form action to the URL that corresponds to the <code>Application.addBar</code> method.  You can test this out by loading this page in your browser:
<a href="http://localhost:9000/">http://localhost:9000/</a></p>

<p>The form should be functional now.  Enter the name of a bar and click the submit button.  Because the <code>addBar</code> method calls the <code>index</code> method, after the POST, the browser is redirected back to the index page.  You can verify that the data is being saved by loading the <a href="http://localhost:9000/bars.json">bars.json</a> page again.</p>

<p>Now lets add some Ajax / jQuery to the <code>index.html</code> page that will get the JSON data and display it in the page.  Add an empty <code>ul</code> tag with an <code>id</code> of <code>bars</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;bars&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now we will insert the JavaScript into the correct place in the page by setting the <code>moreScripts</code> variable:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>#{set &#39;moreScripts&#39;}
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;bars.json&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#bars&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;&lt;li&gt;Bar &quot;</span> <span class="o">+</span> <span class="nx">item</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;&lt;/li&gt;&quot;</span><span class="p">);</span>
</span><span class='line'>            <span class="p">});</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>#{/set}
</span></code></pre></td></tr></table></div></figure>


<p>Using jQuery this bit of JavaScript adds a function handler for when the page is loaded, then in that function it makes a get request to &#8220;bars.json&#8221;.  That request has a function handler for when the result comes back from the Ajax request.  Inside that function handler the data is iterated through and each &#8220;bar&#8221; is appended into the page element with the id of &#8220;bars&#8221; - the <code>ul</code> tag.</p>

<p>Try out the application and make sure that you can still add new bars and see the list of all the bars in the database.</p>

<p>Now that everything works locally, lets deploy the app on the cloud using Heroku.</p>

<p><strong>Step 1)</strong> <a href="http://heroku.com/signup">Create an account on Heroku.com</a>, install the <a href="http://toolbelt.heroku.com">Heroku Toolbelt</a> and <a href="http://git-scm.org">git</a> and then login to Heroku from the command line:</p>

<pre><code>heroku login
</code></pre>

<p>If this is the first time you&#8217;ve done this then new ssh keys for git will be created and associated with your Heroku account.</p>

<p><strong>Step 2)</strong> Each application on Heroku has a Postgres database for testing.  To use that database when running on Heroku we need to configure it.  Play applications on Heroku run in &#8220;prod&#8221; mode.  To set the database to use the Heroku database add the following lines to the <code>conf/application.conf</code> file:</p>

<pre><code>%prod.db=${DATABASE_URL}
%prod.jpa.dialect=org.hibernate.dialect.PostgreSQLDialect
%prod.jpa.ddl=update
</code></pre>

<p>The default way to provide database (and other resource) connection strings to an application on Heroku, is through environment variables.  The <code>DATABASE_URL</code> environment variable will contain the database host, name, username, and password.  Play Framework knows how to handle that information and setup the JDBC connections.</p>

<p><strong>Step 3)</strong> Heroku uses git as a means to uploading applications.  Whether or not you use git for your SCM tool you can use git as the tool to upload an app to Heroku.  In the root directory of your project create git repo, add the files to it, and then commit the files:</p>

<pre><code>git init
git add app conf public test
git commit -m init
</code></pre>

<p>Note: Instead of doing a selective <code>git add</code> you can create a <code>.gitignore</code> file containing the files to not add to the git repo.</p>

<p><strong>Step 4)</strong> Now we will provision a new application on Heroku using the Heroku CLI.  Each application you create gets 750 free &#8221;<a href="http://devcenter.heroku.com/articles/dynos">dyno</a>&#8221; hours per month.  So as a developer you can use Heroku for free and only pay when you need to scale beyond one dyno.  On the command line create a new application using the &#8220;cedar&#8221; stack:</p>

<pre><code>heroku create -s cedar
</code></pre>

<p>This creates an HTTP endpoint and a git endpoint for your application.  You can also use a custom name and point your own domain names at the application.</p>

<p><strong>Step 5)</strong> The application is ready to be deployed to the cloud.  From a command line do a &#8220;git push&#8221; to the master branch on Heroku:</p>

<pre><code>git push heroku master
</code></pre>

<p>Once the files have been received by Heroku, Play Framework&#8217;s precompiler will be run, Heroku will assemble a &#8220;slug file&#8221;, and then the &#8220;slug&#8221; will be deployed onto a dyno.</p>

<p><strong>Step 6)</strong> You can now open the application in your browser by navigating to the domain outputted following the <code>heroku create</code> or by simply running:</p>

<pre><code>heroku open
</code></pre>

<p>You&#8217;ve built a Play Framework application with JPA, JSON, &amp; jQuery and then deployed that application on the cloud with Heroku!  Now <a href="https://github.com/jamesward/playbars">get the code </a> and <a href="http://vivid-sunset-6133.heroku.com/">check out a demo</a> on Heroku.  Let me know if you have any questions.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">James Ward</span></span>

      








  


<time datetime="2011-12-11T19:20:42-07:00" pubdate data-updated="true">Dec 11<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='/categories/heroku/'>Heroku</a>, <a class='category' href='/categories/java/'>Java</a>, <a class='category' href='/categories/play-framework/'>Play Framework</a>, <a class='category' href='/categories/jquery/'>jQuery</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://jamesward.github.com/2011/12/11/tutorial-play-framework-jpa-json-jquery-heroku/" data-via="_JamesWard" data-counturl="http://jamesward.github.com/2011/12/11/tutorial-play-framework-jpa-json-jquery-heroku/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2011/11/30/using-mongodb-for-a-java-web-apps-httpsession/" title="Previous Post: Using MongoDB for a Java Web App's HttpSession">&laquo; Using MongoDB for a Java Web App's HttpSession</a>
      
      
        <a class="basic-alignment right" href="/2011/12/12/heroku-jug-tour-boulder-phoenix-portland/" title="next Post: Heroku JUG Tour: Boulder, Phoenix, & Portland">Heroku JUG Tour: Boulder, Phoenix, & Portland &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    
<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("_JamesWard", 5, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/_JamesWard" class="twitter-follow-button" data-show-count="false">Follow @_JamesWard</a>
  
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/101156657838073927919?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/jamesward">@jamesward</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'jamesward',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/12/12/heroku-jug-tour-boulder-phoenix-portland/">Heroku JUG Tour: Boulder, Phoenix, & Portland</a>
      </li>
    
      <li class="post">
        <a href="/2011/12/11/tutorial-play-framework-jpa-json-jquery-heroku/">Tutorial: Play Framework, JPA, JSON, jQuery, & Heroku</a>
      </li>
    
      <li class="post">
        <a href="/2011/11/30/using-mongodb-for-a-java-web-apps-httpsession/">Using MongoDB for a Java Web App's HttpSession</a>
      </li>
    
      <li class="post">
        <a href="/2011/11/30/heroku-java-user-group-tour-columbus-and-orange-county/">Heroku Java User Group Tour: Columbus and Orange County</a>
      </li>
    
      <li class="post">
        <a href="/2011/11/29/heroku-preso-from-devoxx-2011/">Heroku Preso from Devoxx 2011</a>
      </li>
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2011 - James Ward -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jamesward';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
