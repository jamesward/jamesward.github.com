
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Flex Data Binding Performance Pitfall - James Ward</title>
  <meta name="author" content="James Ward">

  
  <meta name="description" content="A friend of mine recently asked me to help him troubleshoot some performance problems with his Flex application. In his scenario he had a large list &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jamesward.github.com/2008/08/27/flex-data-binding-performance-pitfall">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="James Ward" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-784803-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">James Ward</a></h1>
  
    <h2>Heroku | Java | Scala | Cloud | Open Source | Linux</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jamesward.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul class="main-navigation">
  <li><a href="/about-james-ward">About James Ward</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Flex Data Binding Performance Pitfall</h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-27T15:20:46-06:00" pubdate data-updated="true">Aug 27<span>th</span>, 2008</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>A friend of mine recently asked me to help him troubleshoot some performance problems with his Flex application.  In his scenario he had a large list of data and wanted to filter the data such that each time the search string grew by a character the complex filter would only be run on the results of the previous filter.  A very simple approach to this is just to keep a record in each item indicating if the item matched the filter for each search string.  Even though the filter function will still run for each item, the complex part of the filter function could easily be isolated and only run for the subset of data which matched the previous filter.  This may not be the best way to do this (I&#8217;m open to other suggestions) but it was simple.  You can see the results of my first attempt here:</p>

<p><a href="/fastFilterSubset/fastFilterSubset1.html">Demo 1</a> (Enter a few numbers in the search field and see how many items are being filtered and how long it takes.)
<a href="/fastFilterSubset/srcview/source/fastFilterSubset1.mxml.html">Source 1</a></p>

<p>Notice that in order to keep track of how many items are reaching the main part of the filter I increment a <em>Bindable</em> variable inside the filter function:</p>

<pre><code>[Bindable] private var ffCount:Number = 0;
...
private function ff(item:Object):Boolean
{
...
    ffCount++;
...
}
</code></pre>

<p>Now since I&#8217;ve been programming in Flex for over four years you&#8217;d think I&#8217;d know better.  Every time a <em>Bindable</em> object is modified Flex does a bunch of event dispatching and other plumbing.  In this case the Label which is bound to the <em>ffCount</em> variable is also doing a bunch of work each time <em>ffCount</em> changes.  As you can see, the results are not great.  It takes almost a full second (on my machine) to do the filter on 20,000 items.  Obviously this isn&#8217;t right.</p>

<p>Lesson learned: A Flex application should never, ever, ever, update <em>Bindable</em> objects in filter functions or other places where the user won&#8217;t ever be able to distinguish something changing that rapidly.</p>

<p>A better approach is to update a non-<em>Bindable</em> variable in the loop or filter function, then when the loop or filter is done, copy the non-<em>Bindable</em> variable to a <em>Bindable</em> one.  You can see the updated demo using this approach here:</p>

<p><a href="/fastFilterSubset/fastFilterSubset2.html">Demo 2</a>
<a href="/fastFilterSubset/srcview/source/fastFilterSubset2.mxml.html">Source 2</a></p>

<p>This approach is about 10x faster!  And only a little bit more work.  In this case it&#8217;s very easy to be notified when the filter has completed and then update the <em>Bindable</em> variable:</p>

<pre><code>if (event.kind == CollectionEventKind.REFRESH)
{
    ffCount = _ffCount;
}
</code></pre>

<p>In retrospect this seems like a silly mistake but I would not be surprised if this sort of thing is causing performance problems in many Flex applications.  Data Binding is a very powerful part of Flex but it can also cause performance problems when used incorrectly.  I hope this helps some of you to avoid this pitfall.  Let me know what you think.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">James Ward</span></span>

      








  


<time datetime="2008-08-27T15:20:46-06:00" pubdate data-updated="true">Aug 27<span>th</span>, 2008</time>
      

<span class="categories">
  
    <a class='category' href='/categories/flex/'>Flex</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://jamesward.github.com/2008/08/27/flex-data-binding-performance-pitfall/" data-via="_JamesWard" data-counturl="http://jamesward.github.com/2008/08/27/flex-data-binding-performance-pitfall/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2008/08/22/flash-player-for-64-bit-linux/" title="Previous Post: Making Headway on Flash Player for 64-bit Linux">&laquo; Making Headway on Flash Player for 64-bit Linux</a>
      
      
        <a class="basic-alignment right" href="/2008/08/28/podcast-about-adobe-air-flex-and-blazeds-lcds/" title="next Post: Podcast about Adobe AIR, Flex and BlazeDS / LCDS">Podcast about Adobe AIR, Flex and BlazeDS / LCDS &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    
<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("_JamesWard", 5, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/_JamesWard" class="twitter-follow-button" data-show-count="false">Follow @_JamesWard</a>
  
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/101156657838073927919?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/jamesward">@jamesward</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'jamesward',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/12/12/heroku-jug-tour-boulder-phoenix-portland/">Heroku JUG Tour: Boulder, Phoenix, & Portland</a>
      </li>
    
      <li class="post">
        <a href="/2011/12/11/tutorial-play-framework-jpa-json-jquery-heroku/">Tutorial: Play Framework, JPA, JSON, jQuery, & Heroku</a>
      </li>
    
      <li class="post">
        <a href="/2011/11/30/using-mongodb-for-a-java-web-apps-httpsession/">Using MongoDB for a Java Web App's HttpSession</a>
      </li>
    
      <li class="post">
        <a href="/2011/11/30/heroku-java-user-group-tour-columbus-and-orange-county/">Heroku Java User Group Tour: Columbus and Orange County</a>
      </li>
    
      <li class="post">
        <a href="/2011/11/29/heroku-preso-from-devoxx-2011/">Heroku Preso from Devoxx 2011</a>
      </li>
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2011 - James Ward -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jamesward';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
