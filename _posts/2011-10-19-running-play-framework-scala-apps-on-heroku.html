--- 
layout: post
title: Running Play Framework + Scala Apps on Heroku
published: true
meta: 
  _edit_last: "1"
  custom_permalink: 2011/10/19/running-play-framework-scala-apps-on-heroku
tags: 
- Play Framework
- Scala
type: post
status: publish
---
Building <a href="http://scala.playframework.org/">Play Framework apps with Scala</a> is all the rage right now.  And for good reason...  It's never been easier to build and deploy JVM-based web apps!  Lets walk through how to build a Play app with Scala and then deploy it on the cloud with Heroku.

Step 1) <a href="http://www.playframework.org/download">Install the Play Framework</a> (make sure you have at least version 1.2.3)

Step 2) Install the Play Scala module:
<pre lang="bash">
play install scala
</pre>

Step 3) Create a new Play app with Scala support:
<pre lang="bash">
play new playwithscala --with scala
</pre>

Step 4) Start the app:
<pre lang="bash">
cd playwithscala
play run
</pre>

Step 5) Open the app in your browser:
<a href="http://localhost:9000">http://localhost:9000</a>

That was easy!  Lets spice this up a bit before we deploy it on Heroku by adding a custom model, view, and controller.

Step 1) Create a new <em>app/models/Widget.scala</em> file containing:
<pre lang="scala">
package models

case class Widget(id: Int, name: String)
</pre>

Step 2) Create a new <em>app/views/Widget/list.scala.html</em> file containing:
<pre lang="scala">
@(widgets: Vector[models.Widget])

<!DOCTYPE html>
<html>
    <body>
        @widgets.map { widget => 
            Widget @widget.id = @widget.name</br>
        }
    </body>
</html>
</pre>

Step 3) Create a new <em>app/controllers/WidgetController.scala</em> file containing:
<pre lang="scala">
package controllers

import play._
import play.mvc._

object WidgetController extends Controller {

    import views.Widget._
    import models.Widget

    def list = {
        val widget1 = Widget(1, "The first Widget")
        val widget2 = Widget(2, "A really special Widget")
        val widget3 = Widget(3, "Just another Widget")
        html.list(Vector(widget1, widget2, widget3))
    }

}
</pre>

Step 4) Test out the new code by going to:
<a href="http://localhost:9000/WidgetController/list">http://localhost:9000/WidgetController/list</a>

It works!  And we didn't even need to reload the server!  But lets clean up that URL a bit.  Edit the <em>conf/routes</em> file and change "Application.index" to "WidgetController.list":
<pre lang="something">
GET     /                                       WidgetController.list
</pre>

Now load the new URL:
<a href="http://localhost:9000/widgets/list">http://localhost:9000/</a>

That was easy but now we want to show our friends.  So lets deploy it on Heroku.

Step 1) Install the Heroku command line client on <a href="http://toolbelt.herokuapp.com/linux/readme">Linux</a>, <a href="http://toolbelt.herokuapp.com/osx/download">Mac</a>, or <a href="http://toolbelt.herokuapp.com/windows/download">Windows</a>

Step 2) Login to Heroku from the command line:
<pre lang="bash">
heroku auth:login
</pre>

Step 3) Heroku uses git for application upload, so create a .gitignore file containing:
<pre lang="something">
/modules
/tmp
</pre>

Step 4) Create a git repo, add the files to it, and commit them:
<pre lang="bash">
git init
git add .
git commit -m init
</pre>

Step 5) Create the new application on Heroku:
<pre lang="bash">
heroku create -s cedar
</pre>

This provisions a new application on Heroku and assigns a random name / URL to the app.

Step 6) Deploy the application:
<pre lang="bash">
git push heroku master
</pre>

The application will now be assembled and deployed on Heroku.

Step 7) Open the application in the browser:
<pre lang="bash">
heroku open
</pre>

Tada!  Your Play + Scala app is now running on the cloud!

At JavaOne I showed this to Bill Venners (creator of <a href="http://www.scalatest.org/">ScalaTest</a>).  He then moved the scalatest.org website (a Play + Scala app) to Heroku!  Cool stuff!

Let me know if you have any questions.
